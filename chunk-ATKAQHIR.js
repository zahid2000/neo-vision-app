import{c as m}from"./chunk-EE35MCWT.js";import{O as p,T as f,n as l,r as u,z as c}from"./chunk-O7572MPH.js";var g=class d{constructor(t){this.http=t}categories=[{id:1,name:"Demo D\u0259stl\u0259ri",slug:"demo-kitleri",products:[]},{id:2,name:"Elektronik R\u0259f Etiketl\u0259ri",slug:"elektronik-R\u0259f-etiketleri",children:[{id:17,name:"Valley Seriyas\u0131",slug:"valley-eriyas\u0131",products:[]},{id:18,name:"Blade Seriyas\u0131",slug:"blade-seriyas\u0131",products:[]},{id:19,name:"Shield Seriyas\u0131",slug:"shield-seriyas\u0131",products:[]},{id:20,name:"Essence Colorful Seriyas\u0131",slug:"essence-colorful-seriyas\u0131",products:[]}]},{id:15,name:"LCD L\xF6vh\u0259l\u0259r",slug:"lcd-lovheler",products:[]},{id:16,name:"LCD R\u0259f Ekranlar\u0131",slug:"lcd-ref-ekranlari",products:[]},{id:4,name:"K\xF6m\u0259k\xE7i Avadanl\u0131q v\u0259 Proqram T\u0259minat\u0131",slug:"yardimci-ekipman-ve-yazilimlar",products:[]},{id:5,name:"Montaj Aksesuarlar\u0131",slug:"montaj-aksesuarlari",children:[{id:6,name:"Rell\u0259r",slug:"raylar",parentId:5,products:[]},{id:7,name:"Rel Aksesuarlar\u0131",slug:"ray-aksesuarlari",parentId:5,products:[]},{id:8,name:"Masa\xFCst\xFC Standlar",slug:"masaustu-standlar",parentId:5,products:[]},{id:9,name:"Profil Tutucular",slug:"profil-tutucular",parentId:5,products:[]},{id:10,name:"Asq\u0131lar",slug:"askilar",parentId:5,products:[]},{id:11,name:"R\u0259f Klipsl\u0259ri",slug:"R\u0259f-klipsleri",parentId:5,products:[]},{id:12,name:"Maqnitli Tutucular",slug:"miknatisli-tutucular",parentId:5,products:[]},{id:13,name:"Vint Tipl\u0259ri",slug:"saplama-tipler",parentId:5,products:[]},{id:14,name:"S\u0259b\u0259t Tutucular",slug:"sepet-tutucular",parentId:5,products:[]}]}];getProductsData(){return this.http.get("data/products.json").pipe(c(this.handleError("getProductsData",[])))}getCategories(){return this.getProductsData().pipe(u(t=>{let e=JSON.parse(JSON.stringify(this.categories));return this.assignProductsToCategories(t,e),e}))}assignProductsToCategories(t,e){e.forEach(r=>{r.children?this.assignProductsToCategories(t,r.children):(r.products=t.filter(s=>s.categoryId===r.id),r.id===1&&r.products.forEach(s=>{s.innerProducts&&s.innerProducts.length>0&&(s.innerProducts=s.innerProducts.map(i=>{let a=t.find(o=>o.id===i.id);return a?{id:a.id,quantity:i.quantity}:i}))}))})}getProductsByCategory(t){return this.getProductsData().pipe(u(e=>{if(t===null){let i=[],a=o=>{o.forEach(n=>{n.products&&i.push(...n.products),n.children&&a(n.children)})};return a(this.categories),i}let r,s=(i,a)=>{for(let o of i){if(o.id===a){r=o;return}if(o.children&&(s(o.children,a),r))return}};if(s(this.categories,t),r&&r.children&&r.children.length>0){let i=[],a=o=>{o.forEach(n=>{let h=e.filter(P=>P.categoryId===n.id);i.push(...h),n.children&&a(n.children)})};return a(r.children),i}else return r?e.filter(i=>i.categoryId===t):[]}))}getProductById(t){return this.getProductsData().pipe(u(e=>{let r=e.find(s=>s.id===t);return r&&r.productType===3&&r.innerProducts&&r.innerProducts.length>0&&(r.innerProducts=r.innerProducts.map(s=>{let i=e.find(a=>a.id===s.id);return i?{id:i.id,quantity:s.quantity}:s})),r}))}getProductByStockCode(t){return this.getProductsData().pipe(u(e=>e.find(r=>r.stockCode===t)))}handleError(t="operation",e){return r=>(console.error(r),console.log(`${t} failed: ${r.message}`),l(e))}static \u0275fac=function(e){return new(e||d)(f(m))};static \u0275prov=p({token:d,factory:d.\u0275fac,providedIn:"root"})};export{g as a};
