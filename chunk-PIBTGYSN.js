import{c as m}from"./chunk-DERLH2UM.js";import{O as p,T as f,n as c,r as u,z as l}from"./chunk-ZTPK7JFM.js";var g=class d{constructor(t){this.http=t}categories=[{id:1,name:"Demo D\u0259stl\u0259ri",slug:"demo-kitleri",products:[]},{id:2,name:"Elektronik Raf Etiketl\u0259ri",slug:"elektronik-raf-etiketleri",products:[]},{id:3,name:"X\xFCsusi Elektronik Raf Etiketl\u0259ri",slug:"ozel-elektronik-raf-etiketleri",products:[]},{id:4,name:"K\xF6m\u0259k\xE7i Avadanl\u0131q v\u0259 Proqram T\u0259minat\u0131",slug:"yardimci-ekipman-ve-yazilimlar",products:[]},{id:5,name:"Montaj Aksesuarlar\u0131",slug:"montaj-aksesuarlari",children:[{id:6,name:"Rell\u0259r",slug:"raylar",parentId:5,products:[]},{id:7,name:"Rel Aksesuarlar\u0131",slug:"ray-aksesuarlari",parentId:5,products:[]},{id:8,name:"Masa\xFCst\xFC Standlar",slug:"masaustu-standlar",parentId:5,products:[]},{id:9,name:"Profil Tutucular",slug:"profil-tutucular",parentId:5,products:[]},{id:10,name:"Asq\u0131lar",slug:"askilar",parentId:5,products:[]},{id:11,name:"Raf Klipsl\u0259ri",slug:"raf-klipsleri",parentId:5,products:[]},{id:12,name:"Maqnitli Tutucular",slug:"miknatisli-tutucular",parentId:5,products:[]},{id:13,name:"Vint Tipl\u0259ri",slug:"saplama-tipler",parentId:5,products:[]},{id:14,name:"S\u0259b\u0259t Tutucular",slug:"sepet-tutucular",parentId:5,products:[]}]}];getProductsData(){return this.http.get("data/products.json").pipe(l(this.handleError("getProductsData",[])))}getCategories(){return this.getProductsData().pipe(u(t=>{let e=JSON.parse(JSON.stringify(this.categories));return this.assignProductsToCategories(t,e),e}))}assignProductsToCategories(t,e){e.forEach(r=>{r.children?this.assignProductsToCategories(t,r.children):(r.products=t.filter(o=>o.categoryId===r.id),r.id===1&&r.products.forEach(o=>{o.innerProducts&&o.innerProducts.length>0&&(o.innerProducts=o.innerProducts.map(i=>{let a=t.find(s=>s.id===i.id);return a?{id:a.id,quantity:i.quantity}:i}))}))})}getProductsByCategory(t){return this.getProductsData().pipe(u(e=>{if(t===null){let i=[],a=s=>{s.forEach(n=>{n.products&&i.push(...n.products),n.children&&a(n.children)})};return a(this.categories),i}let r,o=(i,a)=>{for(let s of i){if(s.id===a){r=s;return}if(s.children&&(o(s.children,a),r))return}};if(o(this.categories,t),r&&r.children&&r.children.length>0){let i=[],a=s=>{s.forEach(n=>{let h=e.filter(P=>P.categoryId===n.id);i.push(...h),n.children&&a(n.children)})};return a(r.children),i}else return r?e.filter(i=>i.categoryId===t):[]}))}getProductById(t){return this.getProductsData().pipe(u(e=>{let r=e.find(o=>o.id===t);return r&&r.productType===3&&r.innerProducts&&r.innerProducts.length>0&&(r.innerProducts=r.innerProducts.map(o=>{let i=e.find(a=>a.id===o.id);return i?{id:i.id,quantity:o.quantity}:o})),r}))}getProductByStockCode(t){return this.getProductsData().pipe(u(e=>e.find(r=>r.stockCode===t)))}handleError(t="operation",e){return r=>(console.error(r),console.log(`${t} failed: ${r.message}`),c(e))}static \u0275fac=function(e){return new(e||d)(f(m))};static \u0275prov=p({token:d,factory:d.\u0275fac,providedIn:"root"})};export{g as a};
